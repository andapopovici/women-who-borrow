<% if @book.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@book.errors.count, "error") %> prohibited this book from being saved:</h2>

      <ul>
      <% @book.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

<p>
  <strong>Title:</strong>
  <%= @book.title %>
</p>

<p>
  <strong>Author:</strong>
  <%= @book.author %>
</p>

<p>
  <strong>Edition:</strong>
  <%= @book.edition %>
</p>

<p>
  <strong>Year:</strong>
  <%= @book.year %>
</p>

<p>
  <strong>Isbn:</strong>
  <%= @book.isbn %>
</p>

<p>
  <strong>Tags</strong>
<%= collection_check_boxes(:book, :tag_ids, Tag.all, :id, :name) %>
</p>


<p>
  <strong>Owner:</strong>
  <%= link_to "#{ @book.user.first_name }", user_path(@book.user) %>
</p>

<p>
  <strong>Status:</strong>
  <%= capitalized_status(@book) %>
  <% unless @book.is_available? %>
    by <%= link_to "#{ @book.borrower.first_name }", user_path(@book.borrower) %>
  <% end %>

</p>

<% if @book.belongs_to?(current_user) %>
  <%= link_to 'Edit', edit_book_path(@book) %>
<% end %>

<% if @book.available_to_borrow?(current_user) %>
   <%= form_for @book do |f| %>
     <%= f.hidden_field :status, value: Book::RESERVED %>
     <%= f.submit "Reserve", class: "btn" %>
   <% end %>
<% end %>

<% if @book.reserved_by?(current_user) %>
  <%= form_for @book do |f| %>
     <%= f.hidden_field :status, value: Book::AVAILABLE %>
     <%= f.submit "Withdraw reservation", class: "btn" %>
  <% end %>
<% end %>




